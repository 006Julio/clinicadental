<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Odontograma Dental - Clínica</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }
        canvas {
            border: 1px solid #ccc;
            background: white;
            cursor: pointer;
        }
        .menu {
            width: 200px;
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .tratamiento {
            padding: 10px;
            margin: 5px 0;
            background: #f9f9f9;
            border-left: 4px solid #ddd;
            cursor: pointer;
            border-radius: 4px;
            font-size: 14px;
        }
        .tratamiento:hover {
            background: #eef5ff;
        }
        .tratamiento.empaste { border-left-color: #4CAF50; }
        .tratamiento.caries { border-left-color: #F44336; }
        .tratamiento.implante { border-left-color: #2196F3; }

        .leyenda {
            margin-top: 20px;
            display: flex;
            gap: 15px;
            font-size: 14px;
        }
        .item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .color {
            width: 15px;
            height: 15px;
            border: 1px solid #333;
        }
        footer {
            margin-top: 30px;
            text-align: center;
            color: #555;
            font-size: 13px;
        }
    </style>
</head>
<body>

    <h2>Odontograma Dental</h2>

    <div class="container">
        <canvas id="odontograma" width="800" height="400"></canvas>

        <div class="menu">
            <h4>Tratamientos</h4>
            <div class="tratamiento" onclick="seleccionarTratamiento('empaste')">Empaste</div>
            <div class="tratamiento" onclick="seleccionarTratamiento('caries')">Caries</div>
            <div class="tratamiento" onclick="seleccionarTratamiento('implante')">Implante</div>
            <div class="tratamiento" onclick="seleccionarTratamiento('normal')">Limpiar</div>
        </div>
    </div>

    <div class="leyenda">
        <div class="item"><div class="color" style="background:white"></div> Normal</div>
        <div class="item"><div class="color" style="background:#4CAF50"></div> Empaste</div>
        <div class="item"><div class="color" style="background:#F44336"></div> Caries</div>
        <div class="item"><div class="color" style="background:#2196F3"></div> Implante</div>
    </div>

    <footer>
        Paciente: Juan Pérez (706598) | Saldo: 45,00€
    </footer>

    <script>
        const canvas = document.getElementById("odontograma");
        const ctx = canvas.getContext("2d");

        let tratamientoSeleccionado = "empaste";

        const colores = {
            normal: "#ffffff",
            empaste: "#4CAF50",
            caries: "#F44336",
            implante: "#2196F3"
        };

        function dibujarDiente(x, y, width, height, num, estado) {
            const centerX = x + width / 2;
            const top = y;
            const bottom = y + height * 0.7; // corona
            const rootBottom = y + height;   // raíz

            ctx.fillStyle = colores[estado];
            ctx.beginPath();
            ctx.moveTo(x, y + height * 0.3);
            ctx.quadraticCurveTo(x - width * 0.1, y, centerX, y);
            ctx.quadraticCurveTo(x + width * 1.1, y, x + width, y + height * 0.3);
            ctx.lineTo(x + width, bottom);
            ctx.quadraticCurveTo(x + width, bottom + 5, centerX, bottom + 10);
            ctx.quadraticCurveTo(x, bottom + 5, x, bottom);
            ctx.closePath();
            ctx.fill();

            ctx.strokeStyle = "#000";
            ctx.lineWidth = 1;
            ctx.stroke();

            // Dibujar número
            ctx.fillStyle = "#000";
            ctx.font = "12px Arial";
            ctx.textAlign = "center";
            ctx.fillText(num, centerX, y + height + 18);
        }

        const dientesSuperiores = [
            { x: 80, y: 60, w: 30, h: 60, num: "18", estado: "normal" },
            { x: 130, y: 60, w: 30, h: 60, num: "17", estado: "normal" },
            { x: 180, y: 60, w: 30, h: 60, num: "16", estado: "normal" },
            { x: 230, y: 60, w: 30, h: 60, num: "15", estado: "normal" },
            { x: 280, y: 60, w: 30, h: 60, num: "14", estado: "normal" },
            { x: 330, y: 60, w: 30, h: 60, num: "13", estado: "normal" },
            { x: 380, y: 60, w: 30, h: 60, num: "12", estado: "normal" },
            { x: 430, y: 60, w: 30, h: 60, num: "11", estado: "normal" },
            { x: 480, y: 60, w: 30, h: 60, num: "21", estado: "normal" },
            { x: 530, y: 60, w: 30, h: 60, num: "22", estado: "normal" },
            { x: 580, y: 60, w: 30, h: 60, num: "23", estado: "normal" },
            { x: 630, y: 60, w: 30, h: 60, num: "24", estado: "normal" },
            { x: 680, y: 60, w: 30, h: 60, num: "25", estado: "normal" },
            { x: 730, y: 60, w: 30, h: 60, num: "26", estado: "normal" },
            { x: 780, y: 60, w: 30, h: 60, num: "27", estado: "normal" },
            { x: 830, y: 60, w: 30, h: 60, num: "28", estado: "normal" }
        ];

        const dientesInferiores = [
            { x: 80, y: 220, w: 30, h: 60, num: "48", estado: "normal" },
            { x: 130, y: 220, w: 30, h: 60, num: "47", estado: "normal" },
            { x: 180, y: 220, w: 30, h: 60, num: "46", estado: "normal" },
            { x: 230, y: 220, w: 30, h: 60, num: "45", estado: "normal" },
            { x: 280, y: 220, w: 30, h: 60, num: "44", estado: "normal" },
            { x: 330, y: 220, w: 30, h: 60, num: "43", estado: "normal" },
            { x: 380, y: 220, w: 30, h: 60, num: "42", estado: "normal" },
            { x: 430, y: 220, w: 30, h: 60, num: "41", estado: "normal" },
            { x: 480, y: 220, w: 30, h: 60, num: "31", estado: "normal" },
            { x: 530, y: 220, w: 30, h: 60, num: "32", estado: "normal" },
            { x: 580, y: 220, w: 30, h: 60, num: "33", estado: "normal" },
            { x: 630, y: 220, w: 30, h: 60, num: "34", estado: "normal" },
            { x: 680, y: 220, w: 30, h: 60, num: "35", estado: "normal" },
            { x: 730, y: 220, w: 30, h: 60, num: "36", estado: "normal" },
            { x: 780, y: 220, w: 30, h: 60, num: "37", estado: "normal" },
            { x: 830, y: 220, w: 30, h: 60, num: "38", estado: "normal" }
        ];

        function dibujarDientes() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            dientesSuperiores.forEach(d => dibujarDiente(d.x, d.y, d.w, d.h, d.num, d.estado));
            dientesInferiores.forEach(d => dibujarDiente(d.x, d.y, d.w, d.h, d.num, d.estado));
        }

        function seleccionarTratamiento(tipo) {
            tratamientoSeleccionado = tipo;
        }

        canvas.addEventListener("click", (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            for (let diente of dientesSuperiores) {
                if (x >= diente.x && x <= diente.x + diente.w &&
                    y >= diente.y && y <= diente.y + diente.h) {
                    diente.estado = tratamientoSeleccionado;
                    dibujarDientes();
                    return;
                }
            }

            for (let diente of dientesInferiores) {
                if (x >= diente.x && x <= diente.x + diente.w &&
                    y >= diente.y && y <= diente.y + diente.h) {
                    diente.estado = tratamientoSeleccionado;
                    dibujarDientes();
                    return;
                }
            }
        });

        dibujarDientes();
    </script>

</body>
</html>
